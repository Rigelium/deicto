<!DOCTYPE html>
<html>
  <head>

        <!--Stuff for da browser and embeds-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Deicto">
    <meta property="og:description" content="Deicto is a free, non-profit platform for expanding your vocabulary in foreign languages.">
    <meta property="og:image" content="https://rigelium.github.io/deicto/assets/logo.png">
    <link rel="icon" type="image/x-icon" href="https://rigelium.github.io/deicto/assets/logo_cat.png">

    
    <link rel="stylesheet" href="assets/styles.css">
    <title>Deicto</title>
  </head>
  <body>

     <div style="position: fixed; top: 0px; right: 0px; width: 100%; height: 80px; background-color: black; display: flex; justify-content: space-between; align-items: center;">
      <div onclick='window.location.href=("../")' style="height: 80%; margin: 10px;"><img src="assets/logo.png" style="height: 100%;"></div>
      <div onclick='document.getElementById("options").style.display = "flex"'style="display: flex; justify-content: flex-end; flex-direction: column; justify-content: space-between; height: 40%; margin-right: 10px;">      
      <div style="width: 40px; height: 6px; background-color: white; border-radius: 3px;"></div>
      <div style="width: 40px; height: 6px; background-color: white; border-radius: 3px;"></div><div style="width: 40px; height: 6px; background-color: white; border-radius: 5px;"></div>
      </div>
    </div>
    <div style="height: 90px;"></div>


    <!-- ADD COURSES // ALL COURSES -->
    <div id="add-courses" class="centerfix" style="width: 100%; height: 100%; flex-direction: column; display: none; background-color: var(--bgcolor); z-index: 100;">
      <a style="font-size: 2rem;">All courses</a>
        
      </div>
    </div>


    <div class="box1" style="flex-direction: column;">
    <a style="font-size: 1.5rem; font-weight: bold;">My courses</a>
    <div class="box1" style="background-color: var(--bgcolor); height: 60px; width: 95%; overflow: hidden; justify-content: space-between;">
    <div style="overflow-x: auto; display: flex; gap: 10px; width: 70%">
    <div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div>
<div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div><div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div><div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div><div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div><div style="display: flex; flex-direction: column; height: 100%">
        <img src="assets/flags/Spanish.png" style="height: 60%;">
        <a>Spanish</a>
    </div></div>
    <div onclick='displayCourses()' class = 'box2' style="width: 20%;">
        
        </div>
      </div>
    </div>
    

    <div id='options' class='box1 centerfix' class='centerfix' style='width: 80%; flex-direction: column; display: none;'>
      <a style='font-size: 2rem;'>Menu</a>
      <a>About</a>
      <a>Options</a>
    </div>
    
    <input id="input">Select language</input>
    <button id="btn" onclick="saveLocal()">Set data</button>
        <input id="code-input">Select code</input>
    <button id="code-btn" onclick="codeSaveLocal()">Set data</button>
    <input id="dif-input">Select dif</input>
    <button id="dif-btn" onclick="difSaveLocal()">Set data</button>

    <button onclick="localStorage.clear()">Warning! This button deletes your data</button>

    
    <script>
      //language parameters are already defined

      let language = retrieveVariable("language", 'Spanish');
      let langCodeTTS = retrieveVariable("langCodeTTS", 'es-ES'); 
      let difLevel = retrieveVariable("difLevel", "beginner");
      
      let courses = null;
      window.onload = loadCourses();
      async function loadCourses() {
        try {
          const response = await fetch('levels/courses.json');
          coursesJSON = await response.json();
          courses = coursesJSON.courses;
        } catch(error) {
          console.log(error);
        }
      }


      function displayCourses(){
        const courseContainer = document.getElementById("add-courses");

        let coursesHTML = "";
        for(let i = 0; i < courses.length ; i++){
          coursesHTML += `
          <div class="box1" style="justify-content: flex-start; gap: 10px;">
            <img src="assets/flags/${courses[i].name}.png" style="width: 30%; border-radius: 10px;">
            <a style="font-size: 2rem; font-weight: bold;">${courses[i].name}</a><div class="box2">
            <a>Add</a>
          </div>
          `
        }
        courseContainer.innerHTML = "coursesHTML";
        courseContainer.style.display = "flex";
      }

      const input = document.getElementById('input');
      const btn = document.getElementById('btn');
      

      const difInput = document.getElementById('dif-input');
      const difBtn = document.getElementById('dif-btn');

const codeInput = document.getElementById('code-input');
      const codeBtn = document.getElementById('code-btn');
      
      function saveLocal() {
        localStorage.setItem('language', input.value);
        console.log("changed language to " + input.value);
      }
      function difSaveLocal() {
        localStorage.setItem('difLevel', difInput.value);
         console.log("changed dif to " + difInput.value);
      }
      function codeSaveLocal() {
        localStorage.setItem('langCodeTTS', codeInput.value);
         console.log("changed code to " + codeInput.value);
      }

      

      
      function retrieveVariable(varName, defaultValue) {
        try {
          const storedValue = localStorage.getItem(varName);
          if (storedValue == null){
            return defaultValue;
          }
          return storedValue;
        } catch(error) {
          console.error(error);
          return defaultValue;
        }
      }
      
    </script>
  </body>
</html>
